{"ast":null,"code":"import actionTypes from '../actionTypes/index';\nimport { act } from 'react-dom/test-utils';\nconst initialState = {\n  products: [],\n  departments: [],\n  productPromotions: [],\n  activePromotions: [],\n  numberOfPages: 0,\n  currentPageProducts: [],\n  currentPage: 1,\n  filteredDepartments: [],\n  filteredPromotions: []\n};\n\nconst productsReducer = (state = initialState, action) => {\n  let stateObj = Object.assign({}, state);\n\n  switch (action.type) {\n    case actionTypes.ADD_PRODUCTS:\n      {\n        stateObj.products = action.payload;\n        stateObj.currentPageProducts = action.payload.slice(0, 10);\n        stateObj.numberOfPages = (action.payload.length / 10).toFixed(0);\n        return stateObj;\n      }\n\n    case actionTypes.ADD_DEPARTMENTS:\n      {\n        stateObj.departments = action.payload;\n        return stateObj;\n      }\n\n    case actionTypes.ADD_ACTIVE_PROMOTIONS:\n      {\n        stateObj.activePromotions = action.payload;\n        return stateObj;\n      }\n\n    case actionTypes.ADD_PRODUCTS_PROMOTIONS:\n      {\n        stateObj.productPromotions = action.payload;\n        return stateObj;\n      }\n\n    case actionTypes.SET_CURRENT_PAGE:\n      {\n        let index = action.payload == 1 ? 1 : action.payload + 9;\n        stateObj.currentPageProducts = state.products.slice(index, index + 10);\n        stateObj.currentPage = action.payload;\n        return stateObj;\n      }\n\n    case actionTypes.FILTER_DEPARTMENT:\n      {\n        if (action.payload.length == 0) {\n          stateObj.currentPageProducts = state.products.slice(0, 10);\n          stateObj.numberOfPages = (state.products.length / 10).toFixed(0);\n        } else {\n          stateObj.filteredDepartments = action.payload;\n          let products = [];\n          action.payload.map((item, i) => {\n            products.push(...state.products.filter(product => product.Department_id == item));\n          });\n          stateObj.currentPageProducts = products;\n          stateObj.numberOfPages = (products.length / 10).toFixed(0);\n        }\n\n        return stateObj;\n      }\n\n    case actionTypes.FILTER_PROMOTION:\n      {\n        stateObj.filteredPromotions = action.payload;\n        let filteredProducts = [];\n        state.products.map((product, i) => {\n          let productPromotion = stateObj.productPromotions.filter(item => item.Product_id == product.Product_id);\n\n          if (productPromotion.length > 0) {\n            if (stateObj.filteredPromotions.findIndex(item => item == productPromotion[0].Promotion_id) != -1) {\n              filteredProducts.push(product);\n            }\n          }\n        });\n        stateObj.currentPageProducts = filteredProducts;\n        return stateObj;\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default productsReducer;","map":{"version":3,"sources":["C:/Users/hager/Desktop/code/src/stateManager/reducer/index.js"],"names":["actionTypes","act","initialState","products","departments","productPromotions","activePromotions","numberOfPages","currentPageProducts","currentPage","filteredDepartments","filteredPromotions","productsReducer","state","action","stateObj","Object","assign","type","ADD_PRODUCTS","payload","slice","length","toFixed","ADD_DEPARTMENTS","ADD_ACTIVE_PROMOTIONS","ADD_PRODUCTS_PROMOTIONS","SET_CURRENT_PAGE","index","FILTER_DEPARTMENT","map","item","i","push","filter","product","Department_id","FILTER_PROMOTION","filteredProducts","productPromotion","Product_id","findIndex","Promotion_id"],"mappings":"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","sourcesContent":["\r\nimport actionTypes from '../actionTypes/index';\r\nimport { act } from 'react-dom/test-utils';\r\nconst initialState = {\r\n products:[],\r\n departments :[],\r\n productPromotions :[],\r\n activePromotions :[], \r\n numberOfPages : 0 ,\r\n currentPageProducts : [] , \r\n currentPage :1 ,\r\n filteredDepartments:[],\r\n filteredPromotions:[]\r\n};\r\n\r\nconst productsReducer = (state = initialState, action) => {\r\n  let stateObj = Object.assign({}, state);\r\n  switch (action.type) {\r\n\r\n    case actionTypes.ADD_PRODUCTS:\r\n  {stateObj.products= action.payload;\r\n  stateObj.currentPageProducts = action.payload.slice(0,10);\r\n  stateObj.numberOfPages = (action.payload.length/10).toFixed(0)\r\n  return stateObj ; \r\n\r\n  }\r\n  case actionTypes.ADD_DEPARTMENTS :\r\n    {\r\nstateObj.departments= action.payload ; \r\nreturn stateObj ; \r\n    }\r\n    case actionTypes.ADD_ACTIVE_PROMOTIONS:\r\n      {\r\n    \r\n      stateObj.activePromotions= action.payload;\r\n      return stateObj ; \r\n    \r\n      }\r\n      case actionTypes.ADD_PRODUCTS_PROMOTIONS :\r\n        {\r\n    stateObj.productPromotions= action.payload ; \r\n    return stateObj ; \r\n        }\r\n case actionTypes.SET_CURRENT_PAGE :\r\n   { let index = action.payload == 1 ? 1: action.payload+9 ;\r\n    stateObj.currentPageProducts = state.products.slice(index,index+10);\r\n    stateObj.currentPage = action.payload ; \r\n    return stateObj ; \r\n   }\r\n\r\n       case actionTypes.FILTER_DEPARTMENT :\r\n        { if (action.payload.length==0)\r\n          {\r\n            stateObj.currentPageProducts = state.products.slice(0,10);\r\n            stateObj.numberOfPages = (state.products.length/10).toFixed(0)\r\n          }\r\n          else \r\n          {\r\n            stateObj.filteredDepartments = action.payload ; \r\n            let products =[] ; \r\n            action.payload.map((item,i)=>{\r\n              products.push (...state.products.filter(product => product.Department_id ==item))\r\n            })\r\n            stateObj.currentPageProducts = products \r\n            stateObj.numberOfPages = (products.length/10).toFixed(0)\r\n          }\r\n\r\n          return stateObj ; \r\n        }\r\n        case actionTypes.FILTER_PROMOTION:\r\n          { \r\n           stateObj.filteredPromotions= action.payload ;\r\n           let filteredProducts =[] ;\r\n           state.products.map((product,i)=>\r\n           { let productPromotion = stateObj.productPromotions.filter(item=> item.Product_id == product.Product_id) ;\r\n             if (productPromotion.length>0)\r\n             {\r\n              if (stateObj.filteredPromotions.findIndex(item=> item == productPromotion[0].Promotion_id )!=-1)\r\n              { \r\n                filteredProducts.push(product);\r\n \r\n              }\r\n             }\r\n           \r\n           })\r\n           stateObj.currentPageProducts =filteredProducts;\r\n           return stateObj;\r\n            \r\n          }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default productsReducer; "]},"metadata":{},"sourceType":"module"}